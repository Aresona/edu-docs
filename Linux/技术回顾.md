1. /boot/initrd(init ram disk)   loader 会把这个文件加载到内存中，然后安装驱动程序，此后内核就会释放虚拟文件系统，挂载真正的根目录。
2. swappiness: vm.swappiness=10  该值主要表示我们希望linux从内存与swap分区进行数据交换的强度，值为10则表示当内存占到90%时开始将数据写入SWAP。Ubuntu的默认swappiness值为60,这表示当内存占用到40%时开始将数据写入SWAP;cenots7默认也是60
3. ping 127.0.0.1  ping通后并不能说明你的网络没有问题，只能说明你的本机的IP协议的TCP层没有问题。
4. 文件描述符： 每个进程都由内核中的一个task_struct来维护相关信息，称为进程描述符，进程描述符中有一个指针指向file_struct，是文件描述表，文件描述表里面的每个表项是一个文件描述符，它是一个指针，指向一个open的文件。文件描述符是由内核产生后返回给进程的。ulimit -n表示的就是文件描述符；nofile-- max number of open file descriptors；习惯上，标准输入的文件描述符是0，标准输出的是1，错误输出的是2
5. ctime: ctime是change status time,这里的status包括ll里面的所有信息，而modify time也属于ctime。
6. UTC： 每个时区都有自己的本地时间，在国际无线电电通信场合，为了统一起见，使用一个统一的时间，称为通用协调时，也就是UTC。UTC与GMT时间一样，都是伦敦本地时间。北京时区是东八区，领先UTC八个小时，在电子邮件信头的Date域记为+0800。东正西负。
7. 系统内核优化一般就是指针对业务服务应用而进行的系统内核参数调整。并无一定的标准。
8. uname -n与hostname  也就是network node hostname与hostname一般情况下说的是同一个，一般hostname是调用uname来获取的。
9. 文件的入口就是inode(index node索引节点)，多一个硬链接就是多一个inode；inode是用来存储ll数据和inode-block对应关系的，但是inode不包含文件名。因为要存储文件的属性，所以inode是有大小的。inode号相同的文件，互为硬链接文件，也可以认为就是同一个文件。
10. 一个block只能存放一个文件的内容，每读取一个block就会消耗一次磁盘IO
11. 数据文件： 有些程序在运行的过程中会读取某些特定格式的文件，那些特定格式的文件就可以被称为数据文件。
12. 测试磁盘写入速度： dd if=/dev/zero of=/tmp/test.dd bs=4096 count=5000 
13. 测试磁盘读取速度： dd if=/tmp/test.dd of=/dev/null bs=4096 count=5000
14. 当删除一个文件的时候不会删除它相关的inode和block信息，只会在它的父目录删除掉该文件的对应关系。
15. 文件删除变量： i_link=0 and i_count=0   lsof|grep deleted   0u
16. 每个语言都有自己的正则表达式，而linux的正则表达式一般被三剑客来使用。而NGINX的配置文件使用的PCRE正则表达式。
17. 通配符： 是一种特殊语句，主要有星号和问号，用来模糊搜索文件；在SHELL命令行和Linux正则表达式下它们两个表示的意思是不同的；对于*来说，在命令行中，它可以匹配任意多个任意字符，而在正则表达式中，它匹配的是前面字符或表达式0次或多次，重点是前面。另外通配符作用于匹配文件名，而正则用于文本处理中匹配字符串。玩正则表达式的前提就是export LC_ALL=C.
18. LC_ALL > LC_* > LANG:默认除了LC_ALL以外其他的都跟LANG一样，LANG是优先级很低的一个变量，它指定所有与locale有关的变量的默认值。LC_ALL是为了去除所有本地化的设置，让命令能正确运行
19. 常用的正则表达式符号： ^word word$ ^$ . \ * .* [abc] [^abc](不匹配) grep "." file用来过滤空行 grep [a-zA-Z] grep -E "0{3,5}" grep -E = egrep 用来去掉转义符。
20. 正则表达式语言由两种基本字符类型组成：原义（正常）文本字符和元字符（metacharacter）。元字符是一个或一组代替一个或多个字符的字符。在正则表达式中,*也算是一个原字符。另外几个重要的元字符： \s \S \d \w \W \b;另外 \s跟[[:space:]]意思一样，后者是POSIX字符。
21. $(按位与)  &&(逻辑与)
22. AWK的套路是分两部分，首先是匹配分割，接下来是print
23. 常用通配符： ~ . - \ > >> < | ! {} # ; || $ ``
24. GPT分区命名为Globally Unique Identifier Partition Table Format,是指全局唯一标示磁盘分区表格式。
25. 由于MBR分区表的最大可寻址的存储空间只有2Tb（232x512字节）。因此，在大硬盘出现的现在，MBR分区方式逐渐被GUID分区表取代。
26. 包含MBR引导代码的扇区称为主引导扇区；主引导扇区包含三个部分：MBR、磁盘分区表(DPT)、结束标志。fdisk用用来操作DPT的。另外一般我们用fdisk分区的时候默认是DOS-type partition tables.跟GPT对应。而parted能够操作的分区表格式包括：MS-DOS和GPT两种
27. mknod命令可以用来创建 `block`和`character special files`
28. 内存溢出(out of memory)，指程序在申请内存时，没有足够的内存空间供其使用。内存泄漏(memory leak)，是指程序在申请内存后，无法释放已申请的内存空间，内存泄漏堆积导致的结果就是内存迟早会被吃光。
29. NFS在实现文件传输需要依赖RPC，即远程过程调用。NFS服务在启动时，向RPC注册监听在某个端口上，客户端也需要同步启动RPC。NFS很稳定，对比分布式文件系统的优点在于数据可见，可备份。
30. NFS不只是把为了把数据单独存放在一个地方，更重要的是对于分布式集群来说，实现数据的共享。
31. NFS与RPC的关系就跟中介和房子的关系一样，NFS在传输数据时使用的端口会随机选择。NFS有一堆的参数可以限制访问共享目录的权限
32. rsync比scp和cp好的点就是它能实现增量备份。另外scp等也可以实现通过对比modify时间来拷贝。
33. sersync 仅仅同步发生增、删、改事件的单个文件或目录，不像rsync镜像同步那样需要比对双方服务器整个目录下数千万的文件，并且支持多线程同步，因此效率非常高。它其实是通过inotify+rsync来做的。套路就是谁改变就覆盖谁。并且sersync有错误队列。
34. SSH的两种用法：一种是通过自动生成的密钥对简单加密 `network connection` ,然后通过用户名密码来进行认证。另外一种方法是通过手动生成密钥对来执行认证。
35. DNS请求： hosts > 浏览器缓存 > 主机缓存 > LDNS > 根；LDNS也叫ips DNS；递归查询、迭代查询。
36. 系统本地缓存： `ipconfig /displaydns`。浏览器DNS缓存： `about:dns` 。
37. 伪静态就是通过 `rewrite` 等规则把动态的地址弄成静态的地址，方便搜索引擎抓取。从性能上来讲还不如动态。并发量不是很大的时候可以使用伪静态。
38. 消息队列和任务队列其实有很大的相似性，消息队列更着重的是消息，也就是告知，而任务队列着重与任务，也就是执行。所以说一般是外部发送消息通过消息队列所在的消息处理服务器，消息处理服务器再转发给相应任务所在的任务服务器并在任务队列中排队等待执行。消息中间件就是用在消息队列服务器中用于过滤、区分和根据规则进行转发的程序，在分布式系统中更为常见。
39. 常见网站术语：独立IP/天、PV(处理的请求数)/日、UV(独立访问，基于cookie技术)/天、并发/秒、
40. nginx的优点：支持静态小文件高并发(3W并发，10个进程，内存150M)，
41. 301和302主要区别在于SEO：301导致的流量会被统计到主域名下，而302的不会。二者的区别主要是，一句话，302容易被搜索引擎视为spam，301则不会
42. 对于使用systemd 的系统来说是没有区别的，因为halt、poweroff、reboot、 telinit、shutdown 都是以符号链接到/bin/systemctl 的。
43. 关系型数据库最大的特征是表，本质上是二维表，典型代表的MYSQL和 ORACLE；非关系型数据库，在数据存储上有性能优势，不需要固定的表结构，典型代表有redis/memcache/mongodb，以高效，高性能为目的，相关的格式有:k/v,set,list,document等。
44. 非关系型数据库四种数据类型：k/v(memcached)、list(Hbase),Document-oriented(mongodb),Graph(Noo4J,infoGrid)
45. nginx处理http请求分为8个phrase。
46. dstat可以查看很多系统信息。
47. 多域名访问的方法有两种：一种是通过servername别名的方式，另外一种是通过rewirte的方式实现跳转。
48. 


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       


# 原理图

<center>
![NFS原理图](http://liu2lin600.github.io/2016/07/21/%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E4%B9%8BNFS%E7%AE%80%E4%BB%8B%E5%8F%8A%E5%BA%94%E7%94%A8/nfs_rpc.png)
</center>

TCP三次握手和四次挥手

# 端口号

服务 | 端口号
--- | ---
RPC主端口 | 111
NFS | 随机
rsync | 873


可以联系起来的东西：

* 用户访问网站流程
* DNS解析流程细节
* 三次连接
* HTTP访问流程
* WEB服务器请求后端集群存储的细节
* 四次断开


IP： 20-50W
PV： 100-200W
服务器数量： 10台左右




说架构需要注意的东西：

监控、数据备份、数据同步、服务器间连接方式（salt或密钥分发）

