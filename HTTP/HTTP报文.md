# HTTP报文

如果说HTTP是因特网的信使，那么HTTP报文就是它用来搬东西的包裹了。

## 报文流

HTTP报文是在HTTP应用程序之间发送的数据块。这些数据块以一些文本形式的元信息(meta-information)开头，这些信息描述了报文的内容及含义，后面跟着可选的数据部分。这些报文在客户端、服务器和代理之间流动。术语"流入"、"流出"、"上游"、"下游"都是用来描述报文方向的。

### 报文注入源端服务器

HTTP使用术语流入(inbound)和流出(outbound)来描述事务处理(transaction)的方向。报文流入源端服务器。工作完成之后，会流回用户的Agent代理中。

### 报文向下游流动

HTTP报文会像河水一样流动。不管是请求报文还是响应报文，所有报文都会向下游(downstream)流动。所有报文的发送者都在接收者的上游(upstream)。对于请求报文来说，代理1位于代理3的上游，但对响应报文来说，它就位于代理3的下游。没有报文会向上游流动。

> 术语上游和下游都只与发送者和接收者有关。我们无法区分报文是发送给源端服务器还是发送给客户端的，因为两者都是下游节点。

## 报文的组成部分

每条报文都包含一条来自客户端的请求，或者一条来自服务器的响应。它们由三个部分组成：start line 、header 、 body;

实体的主体或报文的主体(或者就称为主体)是一个可选的数据块。与起始行和首部不同的是，主体中可以包含文本或二进制数据，也可以为空。一般 `content-type` 说明了主体是什么。`content-length`说明了有多大，单位是字节。

- 首部(header)

可以有零个或多个首部，每个首部都包含一个名字，后面跟着一个冒号(:)，然后是一个可选的空格，接着是一个值，最后是一个CRLF。首部是由一个空行结束的，表示了首部列表的结束和实体主体部分的开始。有些HTTP版本，如HTTP/1.1,要求有效的请求或响应报文中必须包含特定的首部。

- 实体的主体部分(entity-body)

实体的主体部分包含一个由任意数据组成的数据块。并不是所有的报文都包含实体的主体部分，有时，报文只是以一个CRLF结束。

